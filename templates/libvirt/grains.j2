provider: libvirt

role: {{ role }}

cluster_name: "{{ name }}"


## COMMON ##
{% if role == "node" %}
host: "{{ name }}-{{ role }}{{'{:0>2}'.format(index + 1)}}"
host_ip: "{{ node.private_ips[index] }}"
{% else %}
host: "{{ name }}-{{ role }}"
host_ip: "{{ env[role].private_ip }}"
{% endif %}

network_domain: "{{ env[role].network_domain }}"

reg_email: "{{ common.reg_email }}"

reg_code: "{{ common.reg_code }}"

reg_additional_modules: {}

ha_repo: "{{ common.ha_repo }}"

{% if role == "node" %}
additional_packages: [] ##["", ...]

additional_repos: {}    ##{ corosync: "http://download.suse.de/ibs/home:/yandroskaos:/branches:/SUSE:/SLE-15-SP1:/Update/standard/" }
{% else %}

additional_packages: {{ env[role].additional_pkgs }}

additional_repos: {{ env[role].additional_repos }}

{% endif %}

authorized_keys: []     ##[ "key" ]



## NODE ##
name_prefix: "{{ name }}-node"

host_ips: {{ jsonify(node.private_ips) }}

shared_storage_type: "{{ common.shared_storage_type }}"

sbd_disk_index: 1

sbd_disk_device: "{{ "/dev/vdb" if common.shared_storage_type == "shared-disk" else "/dev/sdb" }}"

monitor_enabled: {{ jsonify(monitor.enabled) }}

qdevice_enabled: {{ jsonify(qdevice.enabled) }}

qdevice_ip: "{{  qdevice.private_ip if qdevice.enabled }}"

iscsi_ip: "{{ iscsi.private_ip }}"



## QDEVICE ##
qdevice_options: "{{ qdevice.options }}"


## MONITOR ##
monitored_hosts: {{ jsonify(node.private_ips) }}


## ISCSI ##
iscsi_device: "{{ iscsi.device }}"
iscsi_disks: {{ iscsi.disks }}
partitions:
  1:
    start: 1
    end: 33%
  2:
    start: 33%
    end: 67%
  3:
    start: 67%
    end: 100%

